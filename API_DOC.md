# Trip Agent API

This document describes the FastAPI service implemented in `api.py`, which exposes the internal LLM agents so the frontend can trigger them via HTTP.

## Overview

- Framework: FastAPI with automatic OpenAPI schema generation.
- Middleware: permissive CORS to simplify local frontend integration.
- Agents: reuses `FinalResponseAgent` and `AdditionalInfoAgent` from `llm_agent.py`.
- Runtime entrypoint: `uvicorn api:app --reload`.

## Endpoints

### `GET /health`
- Purpose: quick readiness / liveness probe.
- Response: `{"status": "ok"}` when the service is available.

### `POST /final-response`
- Description: forwards aggregated context plus the original query to `FinalResponseAgent` to generate the final user-facing text.
- Request body:
  ```json
  {
    "content": "<required string>",
    "user_query": "<optional string>"
  }
  ```
- Response body:
  ```json
  {
    "response": "<string generated by FinalResponseAgent>"
  }
  ```
- Errors: returns HTTP 502 if the agent responds with an empty string, HTTP 500 for unexpected failures (traceback captured in the server logs).

### `POST /additional-info`
- Description: triggers `AdditionalInfoAgent` to run its RAG + DuckDuckGo workflows for a travel-related topic.
- Request body:
  ```json
  {
    "query": "<required string, min length 3>"
  }
  ```
- Response body:
  ```json
  {
    "info": "<string returned by AdditionalInfoAgent>"
  }
  ```
- Errors: same structure as `/final-response`.

## Request / Response Models

`api.py` uses Pydantic models (`FinalResponsePayload`, `AdditionalInfoPayload`, `FinalResponseResult`, `AdditionalInfoResult`) to enforce schema validation and to auto-document the API.

## Running the Server

```bash
pip install fastapi uvicorn[standard]
uvicorn api:app --reload --port 8000
```

Visit `http://localhost:8000/docs` for the interactive Swagger UI or `http://localhost:8000/redoc` for the ReDoc view.

